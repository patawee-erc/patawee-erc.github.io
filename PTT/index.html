<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Planning Tool</title>
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/4844/4844359.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="app-container">
        <header class="glass-panel">
            <div class="logo">ERC Project<span>Planner</span></div>
            <div class="user-profile">
                <span id="current-user-name">Loading...</span>
                <div id="current-user-avatar" class="avatar">?</div>
                <button id="logout-btn" class="btn-text">Logout</button>
            </div>
        </header>

        <div class="content-wrapper">
            <main>
                <div class="toolbar glass-panel">
                    <div class="view-controls">
                        <button class="btn-icon" id="prev-month">&lt;</button>
                        <h2 id="current-month-display">Month Year</h2>
                        <button class="btn-icon" id="next-month">&gt;</button>
                    </div>
                    <button id="today-btn" class="btn-secondary">Today</button>
                    <button id="add-task-btn" class="btn-primary">+ New Task</button>
                </div>

                <div class="timeline-container glass-panel">
                    <div class="timeline-header">
                        <div class="sidebar-header">Team Members</div>
                        <div class="calendar-header-wrapper" id="calendar-header-wrapper">
                            <div class="calendar-header" id="calendar-header"></div>
                        </div>
                    </div>
                    <div class="timeline-body" id="timeline-body"></div>
                </div>
            </main>

            <aside class="right-sidebar glass-panel">
                <div class="sidebar-title">
                    <h3>My Tasks</h3>
                    <span class="badge" id="my-task-count">0</span>
                </div>
                <div id="my-task-list" class="task-list-container"></div>
            </aside>
        </div>
    </div>

    <!-- Modal ต่างๆ ยังคงไว้เหมือนเดิม -->
    <div id="task-details-modal" class="modal">
        <div class="modal-content glass-panel">
            <h2>Task Details</h2>
            <form id="task-details-form">
                <div class="form-group"><label>Title</label><input type="text" id="detail-title" disabled></div>
                <div class="form-group"><label>Description</label><textarea id="detail-desc" disabled></textarea></div>
                <div class="form-row">
                    <div class="form-group"><label>Start</label><input type="date" id="detail-start" disabled></div>
                    <div class="form-group"><label>End</label><input type="date" id="detail-end" disabled></div>
                </div>
                <div id="countdown-box" class="countdown-container hidden">
                    <div class="countdown-info"><strong id="countdown-value"></strong></div>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select id="detail-status" disabled>
                        <option value="Pending">Pending</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Completed">Completed</option>
                    </select>
                </div>
            </form>
            <div class="form-actions" id="detail-actions-view">
                <button id="edit-task-btn" class="btn-primary hidden">Edit</button>
                <button id="delete-task-btn" class="btn-danger hidden">Delete</button>
                <button class="btn-secondary close-modal">Close</button>
            </div>
            <div class="form-actions hidden" id="detail-actions-edit">
                <button id="save-edit-btn" class="btn-primary">Save</button>
                <button id="cancel-edit-btn" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <div id="task-modal" class="modal">
    <div class="modal-content glass-panel">
        <h2>Create New Task</h2>
        <form id="task-form">
            <div class="form-group">
                <label>Task Title</label>
                <input type="text" id="task-title" placeholder="What needs to be done?" required>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label>Start Date</label>
                    <input type="date" id="task-start" required>
                </div>
                <div class="form-group">
                    <label>End Date (Due Date)</label>
                    <input type="date" id="task-end" required>
                </div>
            </div>

            <div class="form-group">
                <label>Assignee</label>
                <select id="task-assignee" title="You can only create tasks for yourself">
                    <!-- จะถูกเติมและล็อกโดย JS -->
                </select>
                <small style="color: var(--text-muted); font-size: 0.7rem;">Tasks can only be assigned to yourself.</small>
            </div>

            <div class="form-group">
                <label>Description</label>
                <textarea id="task-desc" rows="3" placeholder="Add more details..."></textarea>
            </div>

            <div class="form-actions">
                <button type="button" class="btn-secondary close-modal">Cancel</button>
                <button type="submit" class="btn-primary">Create Task</button>
            </div>
        </form>
    </div>
</div>

    <script src="script.js"></script>
</body>
</html>
